<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>DEVUP Homepage</title>
    <link rel="stylesheet" href="/css/index.css" />
    <script type="module" src="/js/index.js"></script>
  </head>

  <body>
    <div class="header bs">
      <a href="/"
        ><img class="logo" src="/images/DevUp Logo.png" alt="DEVUP"
      /></a>
      <div class="text-set ts">
        <span>Feed</span>
        <span>Stats</span>
        <span>Admin</span>
        <span>Public Chat</span>
      </div>
      <div class="search">
        <span class="search-icon">üîç</span>
        <input
          spellcheck="false"
          type="text"
          class="search-bar bs"
          placeholder="Search..."
        />
      </div>
      {% if user %}
      <div class="buttons">
        <a href="/users/logout"><button class="logout bs">Logout</button></a>
      </div>
      {% else %}
      <div class="buttons">
        <a href="/users"><button class="signup bs">Sign Up</button></a>
        <a href="/users/login"><button class="signin bs">Sign In</button></a>
      </div>
      {% endif %}
    </div>
    <div class="container">
      <div class="contents">
        {% for post in posts %}
        <section>
          <span class="content-title">{{post.postTitle}}</span>
          <div class="content-user">
            <div class="content-user-pfp">user-pfp</div>
            <span class="content-username">{{post.postWriter}}</span>
          </div>
          <div class="content-body">
            <span class="body-text">{{ post.postContent }}</span>
          </div>
          <div class="icon-set">
            <div class="views-icon">views</div>
            <div class="likes-icon">likes</div>
            <div class="comments-icon">comments</div>
          </div>
        </section>
        {% endfor %}
        <!-- Style Testing Section -->
        <section>
          <div class="content-header">
            <span class="content-title"
              >asdfadfasfassdfasdfassdfasdasdfasdfsadfasdfasdfasdfasfdsasdfasdffasdfasdf</span
            >
            <div class="content-user">
              <div class="content-user-pfp"></div>
              <span class="content-username">Eunjae Lee</span>
            </div>
          </div>
          <div class="content-body">
            <span class="body-text"
              >Lorem ipsum dolor sit amet, consectetur adipsicing elist, sed do
              deuimodt tempor incididumnt ut labore lorem strata incantatum
              amore siLorem ipsum dolor sit amet, consectetur adipsicing elist,
              sed do deuimodt tempor incididumnt ut labore lorem strata
              incantatum amore siuimodt tempor incididumnt ut labore lorem
              strata incantatum amore siLorem ipsum dolor sit amet, consectetur
              adipsicing elist, sed do deuimodt tempor incididumnt ut labore
              lorem strata incantatum amore siuimodt tempor incididumnt ut
              labore lorem strata incantatum amore siLorem ipsum dolor sit amet,
              consectetur adipsicing elist, sed do deuimodt tempor incididumnt
              ut labore lorem strata incantatum amore simodt tempor incididumnt
              ut labore lorem strata incantatum amore siLorem ipsum dolor sit
              amet, consectetur adipsicing elist, sed do deuimodt tempor
              incididumnt ut labore lorem strata incantatum amore siuimodt
              tempor incididumnt ut labore lorem strata incantatum amore siLorem
              ipsum dolor sit amet, consectetur adipsicing elist, sed do
              deuimodt tempor incididumnt ut labore lorem strata incantatum
              amore si</span
            >
          </div>
          <div class="content-footer">
            <div class="content-date">2023-11-08</div>
            <div class="icon-set">
              <img src="images/Hit Icon.svg" alt="" /> <span>50</span>
              <img src="images/Like Icon.svg" alt="" /> <span>50</span>
              <img src="images/Comment Icon.svg" alt="" /> <span>50</span>
            </div>
          </div>
        </section>
      </div>
      {% if user %}
      <div class="user bs">
        <div class="user-info">
          <img class="user-pfp" src="{{user.Users_profile}}" alt="" />
          <span class="username ts">Welcome, {{user.Users_name}}</span>
        </div>
        <div class="user-buttons">
          <form action="/create">
            <button class="post bs">Post</button>
          </form>
          <button class="chat bs">Chat</button>
          <a href="/users/profile"
            ><button class="profile bs">Profile</button></a
          >
        </div>
        <div id="chatroom" class="chatroom">
          <div class="chat-content"></div>
          <div class="chat-content"></div>
          <div class="chat-content"></div>
          <input type="text" class="chat-input" />
        </div>
      </div>
      <!-- post modal -->
      <div class="post-modal">
        <div class="modal-header">
          <span>Title</span>
          <input type="text" name="postTitle" />
        </div>
        <div class="modal-body">
          <span>Content</span>
          <textarea name="postContent"> </textarea>
        </div>
        <div class="modal-footer">
          <button>upload</button>
          <button>cancel</button>
          <button>post</button>
        </div>
      </div>
      {% else %}
      <div class="user bs">
        <div class="user-info">
          <img class="user-pfp" src="/images/github%20logo.png" alt="" />
          <span class="username ts">Please sign in...</span>
        </div>
      </div>
      {% endif %}
    </div>
  </body>

  <script>
    const queryString = window.location.search;
    const params = new URLSearchParams(queryString);

    const error = params.get('error');
    if (error) {
      alert(error);
      location.href = '/';
    }
  </script>
</html>
